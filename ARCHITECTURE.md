# é¡¹ç›®æ¶æ„è¯´æ˜

## ğŸ“‹ é¡¹ç›®æ¦‚è§ˆ

**é¡¹ç›®åç§°**: æœ¬åœ°åŒçª—å£æ–‡ä»¶ç®¡ç†ç¨‹åº  
**ç‰ˆæœ¬**: 1.0.0  
**å¼€å‘è¯­è¨€**: Python 3.7+  
**UIæ¡†æ¶**: PyQt5  
**ç‰ˆæœ¬æ§åˆ¶**: Git 2.52.0  
**æ“ä½œç³»ç»Ÿ**: Windows 10/11 (Windowsä¼˜åŒ–)

---

## ğŸ—ï¸ æ•´ä½“æ¶æ„

```
é¡¹ç›®ç»“æ„ï¼ˆåˆ†å±‚æ¶æ„ï¼‰
â”œâ”€â”€ åº”ç”¨å±‚ (Application Layer)
â”‚   â”œâ”€â”€ main.py                    # ç¨‹åºå…¥å£
â”‚   â”œâ”€â”€ config.py                  # å…¨å±€é…ç½®
â”‚   â””â”€â”€ project_info.py            # é¡¹ç›®ä¿¡æ¯
â”‚
â”œâ”€â”€ UIå±‚ (Presentation Layer)
â”‚   â”œâ”€â”€ ui/main_window.py          # ä¸»çª—å£ (åŒé¢æ¿å¸ƒå±€)
â”‚   â”œâ”€â”€ ui/file_panel.py           # æ–‡ä»¶é¢æ¿ (å•é¢æ¿å®ç°)
â”‚   â”œâ”€â”€ ui/menu_bar.py             # èœå•æ æ„å»º
â”‚   â”œâ”€â”€ ui/search_dialog.py        # æœç´¢å¯¹è¯æ¡†
â”‚   â”œâ”€â”€ ui/search.py               # æœç´¢é€»è¾‘
â”‚   â””â”€â”€ ui/config.py               # UIé…ç½®ç®¡ç†
â”‚
â”œâ”€â”€ ä¸šåŠ¡å±‚ (Business Layer)
â”‚   â”œâ”€â”€ ui/file_operations.py      # æ–‡ä»¶æ“ä½œç®¡ç†
â”‚   â””â”€â”€ git_manager.py             # Gitæ“ä½œå·¥å…·
â”‚
â”œâ”€â”€ å·¥å…·å±‚ (Utility Layer)
â”‚   â”œâ”€â”€ test_verify.py             # æµ‹è¯•éªŒè¯å·¥å…·
â”‚   â””â”€â”€ requirements.txt            # ä¾èµ–é…ç½®
â”‚
â””â”€â”€ é…ç½® (Configuration)
    â”œâ”€â”€ .git/                       # Gitä»“åº“
    â”œâ”€â”€ .gitignore                  # Gitå¿½ç•¥è§„åˆ™
    â”œâ”€â”€ .gitmessage                 # Gitæäº¤æ¨¡æ¿
    â””â”€â”€ VERSION                      # ç‰ˆæœ¬å·
```

---

## ğŸ“¦ æ ¸å¿ƒæ¨¡å—è¯¦è§£

### 1. åº”ç”¨å…¥å£æ¨¡å— (main.py)

**èŒè´£**: åº”ç”¨ç¨‹åºå¯åŠ¨ç‚¹  
**æ ¸å¿ƒç±»**: N/A  
**æ ¸å¿ƒå‡½æ•°**: `main()`

```python
ä¸»è¦æµç¨‹ï¼š
1. åˆ›å»º QApplication å®ä¾‹
2. åˆå§‹åŒ– MainWindow
3. æ˜¾ç¤ºçª—å£
4. è¿›å…¥äº‹ä»¶å¾ªç¯
```

**ä¾èµ–**:
- `PyQt5.QtWidgets.QApplication`
- `ui.main_window.MainWindow`

---

### 2. ä¸»çª—å£æ¨¡å— (ui/main_window.py)

**èŒè´£**: æ•´ä¸ªåº”ç”¨çš„ä¸»å®¹å™¨ï¼Œç®¡ç†åŒé¢æ¿å¸ƒå±€å’Œäº¤äº’é€»è¾‘  
**æ ¸å¿ƒç±»**: `MainWindow(QMainWindow)`

**æ ¸å¿ƒå±æ€§**:
| å±æ€§ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| `config` | ConfigManager | é…ç½®ç®¡ç†å™¨ |
| `left_panel` | FilePanel | å·¦æ–‡ä»¶é¢æ¿ |
| `right_panel` | FilePanel | å³æ–‡ä»¶é¢æ¿ |
| `focused_panel` | FilePanel | å½“å‰ç„¦ç‚¹é¢æ¿ |
| `toolbar` | QToolBar | å·¥å…·æ  |

**æ ¸å¿ƒæ–¹æ³•**:
| æ–¹æ³• | è¯´æ˜ |
|------|------|
| `create_toolbar()` | åˆ›å»ºå·¥å…·æ  (ä¸Šçº§ã€åˆ·æ–°ã€åŒæ­¥è·¯å¾„) |
| `setup_shortcuts()` | é…ç½®å¿«æ·é”® (F5/F6/Delete) |
| `get_focused_panel()` | è·å–å½“å‰ç„¦ç‚¹é¢æ¿ |
| `go_up()` | è¿”å›ä¸Šçº§ç›®å½• |
| `refresh_panels()` | åˆ·æ–°ä¸¤ä¸ªé¢æ¿ |
| `copy_files()` | å¤åˆ¶æ–‡ä»¶åˆ°å¦ä¸€ä¸ªé¢æ¿ |
| `move_files()` | ç§»åŠ¨æ–‡ä»¶åˆ°å¦ä¸€ä¸ªé¢æ¿ |
| `delete_files()` | åˆ é™¤é€‰ä¸­æ–‡ä»¶ |
| `sync_paths()` | åŒæ­¥ä¸¤ä¸ªé¢æ¿è·¯å¾„ |
| `_on_panel_focus()` | é¢æ¿ç„¦ç‚¹äº‹ä»¶å¤„ç† |
| `update_panel_highlight()` | æ›´æ–°ç„¦ç‚¹é¢æ¿é«˜äº® |
| `closeEvent()` | çª—å£å…³é—­äº‹ä»¶ï¼Œä¿å­˜é…ç½® |

**å¸ƒå±€ç»“æ„**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        å·¥å…·æ  (ToolBar)              â”‚  <- ä¸Šçº§ã€åˆ·æ–°ã€åŒæ­¥è·¯å¾„
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚              â”‚                      â”‚
â”‚   å·¦é¢æ¿     â”‚    å³é¢æ¿            â”‚  <- ä¸¤ä¸ªç‹¬ç«‹çš„ FilePanel
â”‚ (FilePanel)  â”‚   (FilePanel)        â”‚
â”‚              â”‚                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  å¤åˆ¶ | ç§»åŠ¨ | åˆ é™¤ | åˆ·æ–° (åº•éƒ¨æŒ‰é’®) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ç„¦ç‚¹ç®¡ç†**:
- ä½¿ç”¨ `focused_panel` è¿½è¸ªå½“å‰æ´»è·ƒé¢æ¿
- é¢æ¿è·å¾—ç„¦ç‚¹æ—¶è‡ªåŠ¨æ›´æ–° (`_on_panel_focus`)
- å·¥å…·æ æŒ‰é’®ä½œç”¨äºç„¦ç‚¹é¢æ¿
- ç„¦ç‚¹é¢æ¿æ˜¾ç¤ºè“è‰²è¾¹æ¡†é«˜äº®

---

### 3. æ–‡ä»¶é¢æ¿æ¨¡å— (ui/file_panel.py)

**èŒè´£**: å•ä¸ªæ–‡ä»¶æµè§ˆé¢æ¿çš„å®ç°ï¼ŒåŒ…å«è·¯å¾„å¯¼èˆªã€æ–‡ä»¶åˆ—è¡¨æ˜¾ç¤ºã€æ–‡ä»¶æ“ä½œ  
**æ ¸å¿ƒç±»**: `FilePanel(QWidget)`

**æ ¸å¿ƒå±æ€§**:
| å±æ€§ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| `panel_name` | str | é¢æ¿æ ‡è¯† ("left"/"right") |
| `current_path` | str | å½“å‰æµè§ˆè·¯å¾„ |
| `selected_files` | list | é€‰ä¸­çš„æ–‡ä»¶åˆ—è¡¨ |
| `path_input` | QLineEdit | è·¯å¾„è¾“å…¥æ¡† |
| `file_list` | QTableWidget | æ–‡ä»¶åˆ—è¡¨è¡¨æ ¼ |
| `status_label` | QLineEdit | çŠ¶æ€æ ‡ç­¾ |

**æ ¸å¿ƒæ–¹æ³•**:
| æ–¹æ³• | è¯´æ˜ |
|------|------|
| `refresh()` | åˆ·æ–°æ–‡ä»¶åˆ—è¡¨ |
| `change_path()` | æ”¹å˜å½“å‰è·¯å¾„ |
| `go_up()` | è¿”å›ä¸Šçº§ç›®å½• |
| `on_path_changed()` | è·¯å¾„è¾“å…¥æ¡†å›è½¦å¤„ç† |
| `on_item_double_clicked()` | åŒå‡»æ–‡ä»¶/æ–‡ä»¶å¤¹å¤„ç† |
| `update_status()` | æ›´æ–°é€‰ä¸­æ–‡ä»¶çŠ¶æ€ |
| `copy_to()` | å¤åˆ¶æ–‡ä»¶åˆ°ç›®æ ‡è·¯å¾„ |
| `move_to()` | ç§»åŠ¨æ–‡ä»¶åˆ°ç›®æ ‡è·¯å¾„ |
| `delete_files()` | åˆ é™¤é€‰ä¸­æ–‡ä»¶ |
| `show_context_menu()` | æ˜¾ç¤ºå³é”®èœå• |
| `get_properties()` | è·å–æ–‡ä»¶å±æ€§ |
| `format_size()` | æ ¼å¼åŒ–æ–‡ä»¶å¤§å° |

**UIç»„æˆ**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ è·¯å¾„è¾“å…¥æ¡† â”‚ æµè§ˆæŒ‰é’®       â”‚  <- å¯¼èˆª
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ æ–‡ä»¶åˆ—è¡¨è¡¨æ ¼               â”‚  <- åç§°|ç±»å‹|å¤§å°|ä¿®æ”¹æ—¶é—´
â”‚ â€¢ æ”¯æŒå¤šé€‰                 â”‚
â”‚ â€¢ å³é”®èœå•                 â”‚
â”‚ â€¢ åŒå‡»è¿›å…¥ç›®å½•             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ çŠ¶æ€æ  (é€‰ä¸­æ–‡ä»¶æ•°/æ€»å¤§å°)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æ–‡ä»¶åˆ—è¡¨åˆ—**:
| åˆ— | è¯´æ˜ |
|----|------|
| åç§° | æ–‡ä»¶/æ–‡ä»¶å¤¹åç§° |
| ç±»å‹ | æ–‡ä»¶ç±»å‹ (æ–‡ä»¶/æ–‡ä»¶å¤¹) |
| å¤§å° | æ ¼å¼åŒ–çš„æ–‡ä»¶å¤§å° |
| ä¿®æ”¹æ—¶é—´ | æœ€åä¿®æ”¹æ—¶é—´ |

---

### 4. èœå•æ æ¨¡å— (ui/menu_bar.py)

**èŒè´£**: åˆ›å»ºå’Œç®¡ç†èœå•æ   
**æ ¸å¿ƒå‡½æ•°**: `create_menu_bar(main_window)`

**èœå•ç»“æ„**:
```
æ–‡ä»¶(F)
â”œâ”€â”€ æ‰“å¼€              (Ctrl+O)
â”œâ”€â”€ æ‰“å¼€æ–‡ä»¶å¤¹         (Ctrl+L)
â”œâ”€â”€ â”€â”€â”€â”€â”€
â”œâ”€â”€ æ–°å»ºæ–‡ä»¶å¤¹        (Ctrl+N)
â”œâ”€â”€ é‡å‘½å           (F2)
â”œâ”€â”€ å±æ€§             (Alt+Enter)
â”œâ”€â”€ â”€â”€â”€â”€â”€
â””â”€â”€ é€€å‡º             (Ctrl+Q)

ç¼–è¾‘(E)
â”œâ”€â”€ å¤åˆ¶             (Ctrl+C)
â”œâ”€â”€ å‰ªåˆ‡             (Ctrl+X)
â”œâ”€â”€ ç²˜è´´             (Ctrl+V)
â”œâ”€â”€ â”€â”€â”€â”€â”€
â”œâ”€â”€ å…¨é€‰             (Ctrl+A)
â””â”€â”€ åé€‰             (Ctrl+Shift+A)

æŸ¥çœ‹(V)
â”œâ”€â”€ åˆ·æ–°             (F5)
â”œâ”€â”€ â”€â”€â”€â”€â”€
â”œâ”€â”€ æ˜¾ç¤ºéšè—æ–‡ä»¶
â”œâ”€â”€ æ˜¾ç¤ºæ–‡ä»¶æ‰©å±•å
â””â”€â”€ å‡åº/é™åº

å·¥å…·(T)
â”œâ”€â”€ æœç´¢æ–‡ä»¶         (Ctrl+F)
â”œâ”€â”€ â”€â”€â”€â”€â”€
â”œâ”€â”€ æ–‡ä»¶å¤¹åŒæ­¥
â””â”€â”€ å¯¹æ¯”æ–‡ä»¶

å¸®åŠ©(H)
â”œâ”€â”€ å…³äºç¨‹åº
â””â”€â”€ å¸®åŠ©æ–‡æ¡£
```

---

### 5. æœç´¢æ¨¡å— (ui/search.py & ui/search_dialog.py)

**èŒè´£**: å®ç°æ–‡ä»¶æœç´¢åŠŸèƒ½

**æ ¸å¿ƒç±»**: 
- `FileSearcher`: æœç´¢é€»è¾‘å¼•æ“
- `SearchDialog`: æœç´¢UIå¯¹è¯æ¡†

**æœç´¢åŠŸèƒ½**:
- æŒ‰æ–‡ä»¶åæœç´¢ (æ”¯æŒé€šé…ç¬¦)
- æŒ‰æ–‡ä»¶ç±»å‹æœç´¢
- æŒ‰æ–‡ä»¶å¤§å°æœç´¢
- æŒ‰ä¿®æ”¹æ—¶é—´æœç´¢
- é€’å½’æœç´¢å­ç›®å½•

---

### 6. æ–‡ä»¶æ“ä½œæ¨¡å— (ui/file_operations.py)

**èŒè´£**: æ–‡ä»¶ç³»ç»Ÿæ“ä½œçš„åº•å±‚å®ç°  
**æ ¸å¿ƒç±»**: `FileOperationManager`

**æ ¸å¿ƒåŠŸèƒ½**:
| æ–¹æ³• | è¯´æ˜ |
|------|------|
| `open_file()` | æ‰“å¼€æ–‡ä»¶ (ç³»ç»Ÿé»˜è®¤åº”ç”¨) |
| `open_folder()` | æ‰“å¼€æ–‡ä»¶å¤¹ (ç³»ç»Ÿæµè§ˆå™¨) |
| `get_file_info()` | è·å–æ–‡ä»¶è¯¦ç»†ä¿¡æ¯ |
| `format_size()` | æ ¼å¼åŒ–æ–‡ä»¶å¤§å° |
| `get_folder_size()` | è·å–æ–‡ä»¶å¤¹æ€»å¤§å° |
| `create_folder()` | åˆ›å»ºæ–°æ–‡ä»¶å¤¹ |
| `rename_file()` | é‡å‘½åæ–‡ä»¶ |
| `delete_file()` | åˆ é™¤æ–‡ä»¶ |
| `copy_file()` | å¤åˆ¶æ–‡ä»¶ |
| `move_file()` | ç§»åŠ¨æ–‡ä»¶ |
| `delete_folder()` | åˆ é™¤æ–‡ä»¶å¤¹ (é€’å½’) |
| `copy_folder()` | å¤åˆ¶æ–‡ä»¶å¤¹ (é€’å½’) |
| `move_folder()` | ç§»åŠ¨æ–‡ä»¶å¤¹ (é€’å½’) |

**è·¨å¹³å°æ”¯æŒ**:
- Windows: `os.startfile()`
- Linux/macOS: `xdg-open`

---

### 7. é…ç½®ç®¡ç†æ¨¡å— (ui/config.py)

**èŒè´£**: åº”ç”¨é…ç½®çš„æŒä¹…åŒ–ç®¡ç†  
**æ ¸å¿ƒç±»**: `ConfigManager`

**é…ç½®é¡¹**:
```json
{
  "window_width": 1400,        # çª—å£å®½åº¦
  "window_height": 800,        # çª—å£é«˜åº¦
  "window_x": 100,             # çª—å£Xåæ ‡
  "window_y": 100,             # çª—å£Yåæ ‡
  "left_panel_path": "C:\\",   # å·¦é¢æ¿è·¯å¾„
  "right_panel_path": "C:\\",  # å³é¢æ¿è·¯å¾„
  "show_hidden_files": false,  # æ˜¾ç¤ºéšè—æ–‡ä»¶
  "show_file_extensions": true # æ˜¾ç¤ºæ–‡ä»¶æ‰©å±•å
}
```

**å­˜å‚¨ä½ç½®**: `~/.filemanager/config.json`

**æ ¸å¿ƒæ–¹æ³•**:
| æ–¹æ³• | è¯´æ˜ |
|------|------|
| `get()` | è·å–é…ç½®å€¼ |
| `set()` | è®¾ç½®å•ä¸ªé…ç½® |
| `update()` | æ‰¹é‡æ›´æ–°é…ç½® |
| `save()` | ä¿å­˜é…ç½®åˆ°æ–‡ä»¶ |
| `load()` | ä»æ–‡ä»¶åŠ è½½é…ç½® |

---

### 8. Gitç®¡ç†å·¥å…· (git_manager.py)

**èŒè´£**: ç®€åŒ–Gitæ“ä½œçš„å‘½ä»¤è¡Œå·¥å…·  
**æ ¸å¿ƒç±»**: N/A (å‡½æ•°å¼)

**æ ¸å¿ƒåŠŸèƒ½**:
| å‘½ä»¤ | è¯´æ˜ |
|------|------|
| åˆ†æ”¯æ“ä½œ | åˆ›å»ºã€åˆ‡æ¢ã€åˆ—å‡ºã€åˆ é™¤åˆ†æ”¯ |
| æäº¤æ“ä½œ | æŸ¥çœ‹çŠ¶æ€ã€æš‚å­˜ã€æäº¤ã€æ¨é€ |
| æ—¥å¿—æ ‡ç­¾ | æŸ¥çœ‹æäº¤æ—¥å¿—ã€åˆ›å»º/æŸ¥çœ‹æ ‡ç­¾ |
| é«˜çº§æ“ä½œ | åˆå¹¶ã€å˜åŸºã€è§£å†³å†²çª |

**å¯ç”¨åˆ†æ”¯**:
- `main`: ä¸»åˆ†æ”¯ (ç¨³å®šç‰ˆæœ¬)
- `develop`: å¼€å‘åˆ†æ”¯
- `feature/ui-modernization`: UIç°ä»£åŒ–
- `feature/performance-optimization`: æ€§èƒ½ä¼˜åŒ–
- `feature/shortcuts`: å¿«æ·é”®åŠŸèƒ½
- `feature/themes`: ä¸»é¢˜ç³»ç»Ÿ
- `hotfix/bugs`: Bugä¿®å¤

---

## ğŸ”„ ä¸»è¦æ•°æ®æµ

### æ–‡ä»¶æµè§ˆæµç¨‹
```
ç”¨æˆ·æ“ä½œ (ç‚¹å‡»ã€è¾“å…¥)
    â†“
FilePanel æ•è·äº‹ä»¶
    â†“
è°ƒç”¨ refresh() / change_path()
    â†“
æ‰«æç›®å½•è·å–æ–‡ä»¶åˆ—è¡¨
    â†“
FileOperationManager è·å–æ–‡ä»¶ä¿¡æ¯
    â†“
QTableWidget æ›´æ–°æ˜¾ç¤º
    â†“
æ›´æ–°çŠ¶æ€æ 
```

### æ–‡ä»¶æ“ä½œæµç¨‹
```
ç”¨æˆ·é€‰æ‹©æ–‡ä»¶ + æ“ä½œæŒ‰é’®
    â†“
MainWindow ç¡®å®šç„¦ç‚¹é¢æ¿
    â†“
è°ƒç”¨ copy_files() / move_files() / delete_files()
    â†“
FileOperationManager æ‰§è¡Œå®é™…æ“ä½œ
    â†“
ç¡®è®¤å¯¹è¯æ¡†
    â†“
æ“ä½œå®Œæˆï¼ŒåŒé¢æ¿åˆ·æ–°
    â†“
æ˜¾ç¤ºæ“ä½œç»“æœ
```

### ç„¦ç‚¹åˆ‡æ¢æµç¨‹
```
ç”¨æˆ·ç‚¹å‡»é¢æ¿
    â†“
é¢æ¿ focusInEvent è§¦å‘
    â†“
MainWindow._on_panel_focus() æ‰§è¡Œ
    â†“
æ›´æ–° focused_panel è¿½è¸ªå˜é‡
    â†“
update_panel_highlight() æ›´æ–°è¾¹æ¡†é«˜äº®
    â†“
å·¥å…·æ æŒ‰é’®ç°åœ¨ä½œç”¨äºè¯¥é¢æ¿
```

---

## ğŸ” ä¾èµ–å…³ç³»

### å¤–éƒ¨ä¾èµ–
```
PyQt5 (5.15.9)
â”œâ”€â”€ QtWidgets       # çª—å£ã€å¯¹è¯æ¡†ã€èœå•ç­‰
â”œâ”€â”€ QtCore          # ä¿¡å·æ§½ã€æ–‡ä»¶ç›‘æ§ç­‰
â”œâ”€â”€ QtGui           # å›¾æ ‡ã€å­—ä½“ã€æ ·å¼ç­‰
â””â”€â”€ QtCore.Qt       # æšä¸¾å¸¸é‡
```

### å†…éƒ¨ä¾èµ–
```
main.py
    â””â”€â”€ ui.main_window
            â”œâ”€â”€ ui.file_panel
            â”‚   â”œâ”€â”€ ui.file_operations
            â”‚   â””â”€â”€ ui.search
            â”œâ”€â”€ ui.menu_bar
            â”œâ”€â”€ ui.config
            â””â”€â”€ config (å…¨å±€)

test_verify.py
    â”œâ”€â”€ ui.file_operations
    â”œâ”€â”€ ui.config
    â””â”€â”€ ui.search

git_manager.py
    â””â”€â”€ subprocess (æ ‡å‡†åº“)
```

---

## ğŸ¯ å…³é”®è®¾è®¡æ¨¡å¼

### 1. **MVCæ¨¡å¼**
- **Model**: `FileOperationManager`, `ConfigManager` (æ•°æ®å’Œä¸šåŠ¡é€»è¾‘)
- **View**: `FilePanel`, `MainWindow` (UIå±•ç¤º)
- **Controller**: äº‹ä»¶å¤„ç†æ–¹æ³• (ç”¨æˆ·äº¤äº’)

### 2. **å•ä¸€èŒè´£åŸåˆ™**
- æ¯ä¸ªæ¨¡å—ä¸“æ³¨äºä¸€ä¸ªåŠŸèƒ½åŸŸ
- `FilePanel`: æ–‡ä»¶æµè§ˆ
- `FileOperationManager`: æ–‡ä»¶æ“ä½œ
- `ConfigManager`: é…ç½®ç®¡ç†

### 3. **ç„¦ç‚¹è¿½è¸ªæ¨¡å¼**
- ä¸ä¾èµ– PyQt5 çš„ `hasFocus()` (ä¸å¯é )
- ä¸»åŠ¨è¿½è¸ª `focused_panel` å˜é‡
- é€šè¿‡äº‹ä»¶ç»‘å®šæ›´æ–°ç„¦ç‚¹

### 4. **å·¥å‚æ–¹æ³•æ¨¡å¼**
- `create_menu_bar()`: åŠ¨æ€åˆ›å»ºèœå•æ 
- `create_toolbar()`: åŠ¨æ€åˆ›å»ºå·¥å…·æ 

---

## ğŸ“Š ç±»å…³ç³»å›¾

```
QMainWindow
    â†‘
MainWindow
    â”œâ”€â”€â”€ FilePanel (left)
    â”‚       â””â”€â”€â”€ QTableWidget (file_list)
    â”‚       â””â”€â”€â”€ QLineEdit (path_input)
    â”‚       â””â”€â”€â”€ FileOperationManager
    â”‚
    â”œâ”€â”€â”€ FilePanel (right)
    â”‚       â””â”€â”€â”€ QTableWidget (file_list)
    â”‚       â””â”€â”€â”€ QLineEdit (path_input)
    â”‚       â””â”€â”€â”€ FileOperationManager
    â”‚
    â”œâ”€â”€â”€ QToolBar
    â”œâ”€â”€â”€ QMenuBar
    â”‚       â””â”€â”€â”€ QMenu (File/Edit/View/Tools/Help)
    â”‚
    â””â”€â”€â”€ ConfigManager

FilePanel
    â”œâ”€â”€â”€ FileOperationManager
    â”œâ”€â”€â”€ FileSearcher
    â””â”€â”€â”€ SearchDialog
```

---

## ğŸš€ æ‰©å±•æœºåˆ¶

### æ·»åŠ æ–°åŠŸèƒ½æ­¥éª¤

1. **æ·»åŠ æ–°çš„æ–‡ä»¶æ“ä½œ**:
   - åœ¨ `FileOperationManager` ä¸­æ·»åŠ æ–¹æ³•
   - åœ¨ `FilePanel` ä¸­è°ƒç”¨

2. **æ·»åŠ æ–°èœå•é¡¹**:
   - åœ¨ `ui/menu_bar.py` ä¸­æ·»åŠ 
   - åœ¨ `MainWindow` ä¸­å®ç°å¯¹åº”æ–¹æ³•

3. **æ·»åŠ æœç´¢åŠŸèƒ½**:
   - åœ¨ `ui/search.py` ä¸­æ‰©å±• `FileSearcher`
   - åœ¨ `SearchDialog` ä¸­æ·»åŠ UI

4. **æ·»åŠ æ–°é¢æ¿ç±»å‹**:
   - ç»§æ‰¿æˆ–æ‰©å±• `FilePanel`
   - åœ¨ `MainWindow` ä¸­å®ä¾‹åŒ–

---

## ğŸ“ˆ æ€§èƒ½è€ƒè™‘

### ä¼˜åŒ–æŠ€æœ¯
1. **æ‡’åŠ è½½**: æ–‡ä»¶åˆ—è¡¨åªåŠ è½½å¯è§éƒ¨åˆ† (QTableWidget è‡ªåŠ¨å¤„ç†)
2. **ç¼“å­˜**: é…ç½®ä¿¡æ¯ç¼“å­˜åœ¨å†…å­˜ï¼Œå‡å°‘IO
3. **å¼‚æ­¥æ“ä½œ**: å¤§æ–‡ä»¶å¤¹æ“ä½œé€šè¿‡çº¿ç¨‹å¤„ç† (å¯æ‰©å±•)
4. **è™šæ‹Ÿæ»šåŠ¨**: QTableWidget æ”¯æŒå¤§é‡æ–‡ä»¶æ˜¾ç¤º

### ç“¶é¢ˆ
- å¤§æ–‡ä»¶å¤¹ (>10000æ–‡ä»¶) åŠ è½½å¯èƒ½è¾ƒæ…¢
- é€’å½’è®¡ç®—æ–‡ä»¶å¤¹å¤§å°è€—æ—¶
- ç½‘ç»œè·¯å¾„è®¿é—®å»¶è¿Ÿ

---

## ğŸ”„ ç‰ˆæœ¬æ§åˆ¶é›†æˆ

### Gitåˆ†æ”¯ç­–ç•¥
```
main
  â†‘ (release)
develop
  â†‘ (feature complete)
feature/* (in-progress)
```

### æäº¤çº¦å®š
```
type(scope): description

types: feat, fix, docs, style, refactor, test, chore
ä¾‹: feat(ui): Add file sorting feature
```

---

## ğŸ“ ä»£ç ç»Ÿè®¡

| æ¨¡å— | è¡Œæ•° | è¯´æ˜ |
|------|------|------|
| main.py | ~20 | ç¨‹åºå…¥å£ |
| ui/main_window.py | ~210 | ä¸»çª—å£é€»è¾‘ |
| ui/file_panel.py | ~378 | é¢æ¿å®ç° |
| ui/menu_bar.py | ~150 | èœå•æ„å»º |
| ui/file_operations.py | ~121 | æ–‡ä»¶æ“ä½œ |
| ui/search.py | ~80 | æœç´¢å¼•æ“ |
| ui/search_dialog.py | ~120 | æœç´¢UI |
| ui/config.py | ~60 | é…ç½®ç®¡ç† |
| git_manager.py | ~315 | Gitå·¥å…· |
| **æ€»è®¡** | **~1454** | **æ ¸å¿ƒä»£ç ** |

---

## ğŸ“ å­¦ä¹ è·¯å¾„

1. **å¿«é€Ÿç†è§£**: è¯» `main.py` â†’ `ui/main_window.py`
2. **æ·±å…¥UI**: è¯» `ui/file_panel.py` â†’ `ui/menu_bar.py`
3. **ä¸šåŠ¡é€»è¾‘**: è¯» `ui/file_operations.py` â†’ `ui/search.py`
4. **ç³»ç»Ÿé›†æˆ**: è¯» `git_manager.py` â†’ `test_verify.py`

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

| æ–‡æ¡£ | è¯´æ˜ |
|------|------|
| [README.md](README.md) | é¡¹ç›®æ¦‚è¿°å’Œå¿«é€Ÿå¼€å§‹ |
| [QUICK_START.md](QUICK_START.md) | å¿«é€Ÿå…¥é—¨æŒ‡å— |
| [USAGE_GUIDE.md](USAGE_GUIDE.md) | è¯¦ç»†ä½¿ç”¨è¯´æ˜ |
| [GIT_WORKFLOW.md](GIT_WORKFLOW.md) | Gitå·¥ä½œæµç¨‹ |
| [OPTIMIZATION_PLAN.md](OPTIMIZATION_PLAN.md) | ä¼˜åŒ–è®¡åˆ’ |

---

---

## ğŸ“ æ¶æ„é€ŸæŸ¥è¡¨

### æ ¸å¿ƒæ¦‚å¿µ

è¿™æ˜¯ä¸€ä¸ª**åŒçª—å£æ–‡ä»¶ç®¡ç†ç¨‹åº**ï¼ˆç±»ä¼¼ FreeCommanderï¼‰ï¼Œé‡‡ç”¨**åˆ†å±‚æ¶æ„**è®¾è®¡ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        åº”ç”¨å…¥å£ (main.py)           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   UIå±‚ (UI Presentation Layer)      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ å·¦é¢æ¿   â”‚    å³é¢æ¿        â”‚   â”‚ <- FilePanel
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â””â”€â”€â”€ MainWindow (åŒé¢æ¿å®¹å™¨)       â”‚
â”‚  â””â”€â”€â”€ MenuBar (èœå•)                â”‚
â”‚  â””â”€â”€â”€ SearchDialog (æœç´¢)           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ä¸šåŠ¡å±‚ (Business Logic Layer)    â”‚
â”‚  â””â”€â”€â”€ FileOperationManager (æ–‡ä»¶æ“ä½œ)â”‚
â”‚  â””â”€â”€â”€ ConfigManager (é…ç½®ç®¡ç†)     â”‚
â”‚  â””â”€â”€â”€ FileSearcher (æœç´¢å¼•æ“)       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç³»ç»Ÿå±‚ (System Integration Layer)  â”‚
â”‚  â””â”€â”€â”€ Git Manager (ç‰ˆæœ¬æ§åˆ¶)        â”‚
â”‚  â””â”€â”€â”€ OS File System (æ–‡ä»¶ç³»ç»Ÿ)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 8ä¸ªæ ¸å¿ƒæ¨¡å—é€ŸæŸ¥

1. **main.py** - ç¨‹åºå…¥å£ (~20è¡Œ)
2. **ui/main_window.py** - ä¸»çª—å£ (~210è¡Œ)
3. **ui/file_panel.py** - æ–‡ä»¶é¢æ¿ (~320è¡Œ)
4. **ui/menu_bar.py** - èœå•æ  (~100è¡Œ)
5. **ui/search_dialog.py** - æœç´¢å¯¹è¯æ¡† (~135è¡Œ)
6. **ui/search.py** - æœç´¢æ¨¡å— (~60è¡Œ)
7. **ui/config.py** - é…ç½®ç®¡ç† (~60è¡Œ)
8. **ui/file_operations.py** - æ–‡ä»¶æ“ä½œ (~110è¡Œ)

**æœ€åæ›´æ–°**: 2026-01-17  
**æ¶æ„ç‰ˆæœ¬**: 1.0.0
